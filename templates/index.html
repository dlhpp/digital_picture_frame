<!DOCTYPE html>
<html>
<head>
    <title>{{.Title}}</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Prevents scrollbars */
        }    
        #container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        .image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            opacity: 0;
            transition: opacity {{.Fadetime}}s ease-in-out;
        }
        .visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="container">
        <img id="img1" class="image visible" src="">
        <img id="img2" class="image" src="">
    </div>

    <script>
        const HOLD_TIME = {{.Holdtime}}; // 5 seconds
        const img1 = document.getElementById('img1');
        const img2 = document.getElementById('img2');
        let currentImg = img1;
        let nextImg = img2;

        function getNextImageUrl() {
            return '/next?' + new Date().getTime(); // Cache buster
        }

        function swapImages() {
            // Request next image
            nextImg.src = getNextImageUrl();

            // Wait for the new image to load
            nextImg.onload = () => {
                // Fade in next image
                nextImg.classList.add('visible');
                currentImg.classList.remove('visible');

                // Swap references
                const temp = currentImg;
                currentImg = nextImg;
                nextImg = temp;

                // Schedule next swap
                setTimeout(swapImages, HOLD_TIME); // 10 seconds
            };
        }

        // Start the cycle
        img1.src = getNextImageUrl();
        img1.onload = () => {
            setTimeout(swapImages, HOLD_TIME); // Start after first image loads
        };
    </script>
</body>
</html>